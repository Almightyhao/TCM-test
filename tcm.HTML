<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>æ™ºæ…§ä¸­è—¥é£²ç‰‡æ¸¬é©—</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
    #quiz-screen, #results-screen { margin-top: 20px; }
    .option-btn { margin: 5px; padding: 10px 20px; font-size: 16px; }
    .hidden { display: none; }
    img { max-width: 200px; display: block; margin: 10px auto; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>æ™ºæ…§ä¸­è—¥é£²ç‰‡æ¸¬é©—</h1>
  <div id="quiz-screen">
    <div id="progress"></div>
    <img id="herb-image" alt="è«‹è¾¨è­˜æ­¤é£²ç‰‡">
    <div id="options-container"></div>
    <div id="feedback"></div>
  </div>
  <div id="results-screen" class="hidden">
    <h2>æ¸¬é©—çµæŸ</h2>
    <p id="score-text"></p>
    <p id="comment-text"></p>
    <button id="restart-btn">é‡æ–°æ¸¬é©—</button>
  </div>

  <script>
    const herbData = [
      { "id": "D2570", "name": "å¤§é»ƒ", "category": "ç€‰ä¸‹è—¥(æ”»ä¸‹)" },
      { "id": "D2589", "name": "å±±è—¥", "category": "è£œç›Šè—¥(è£œæ°£)" },
      { "id": "D2472", "name": "è‚‰è“¯è“‰", "category": "è£œç›Šè—¥(è£œé™½)" },
      { "id": "D2402", "name": "å·æ¥å­", "category": "ç†æ°£è—¥" },
      { "id": "D2388", "name": "åœŸèŒ¯è‹“", "category": "æ¸…ç†±è—¥(æ¸…ç†±è§£æ¯’)" },
      { "id": "D2392", "name": "å¥³è²å­", "category": "è£œç›Šè—¥(è£œé™°)" },
      { "id": "D2412", "name": "å¤©é–€å†¬", "category": "è£œç›Šè—¥(è£œé™°)" },
      { "id": "D2404", "name": "ä¸¹åƒ", "category": "ç†è¡€è—¥(æ´»è¡€ç¥›ç˜€)" },
      { "id": "D2445", "name": "ç‚’ç™½æœ®", "category": "è£œç›Šè—¥(è£œæ°£)" },
      { "id": "D2448", "name": "ç™½èŠ¥å­", "category": "ç¥›ç—°è—¥(æº«åŒ–å¯’ç—°)" },
      { "id": "D2454", "name": "ç™½èŒ…æ ¹", "category": "ç†è¡€è—¥(æ­¢è¡€)" },
      { "id": "D2460", "name": "çŸ³æ–›", "category": "è£œç›Šè—¥(è£œé™°)" },
      { "id": "D2435", "name": "åŠå¤", "category": "ç¥›ç—°è—¥(ç‡¥æ¿•åŒ–ç—°)" },
      { "id": "D2434", "name": "åŠæè“®", "category": "æ¸…ç†±è—¥(æ¸…ç†±è§£æ¯’)" },
      { "id": "D2427", "name": "ä»™é¶´è‰", "category": "ç†è¡€è—¥(æ­¢è¡€)" },
      { "id": "D2437", "name": "ç‰ç«¹", "category": "è£œç›Šè—¥(è£œé™°)" },
      { "id": "D2436", "name": "ç„åƒ", "category": "æ¸…ç†±è—¥(æ¸…ç†±æ¶¼è¡€)" },
      { "id": "D2457", "name": "ç™½é®®çš®", "category": "æ¸…ç†±è—¥(æ¸…ç†±ç‡¥æ¿•)" },
      { "id": "D2466", "name": "åœ°é¾", "category": "å¹³è‚ç†„é¢¨è—¥" },
      { "id": "D2465", "name": "åœ°è†šå­", "category": "ç¥›æ¿•è—¥(åˆ©æ°´æ»²æ¿•)" },
      { "id": "D2468", "name": "ç™¾åˆ", "category": "è£œç›Šè—¥(è£œé™°)" },
      { "id": "D2469", "name": "ç™¾éƒ¨", "category": "ç¥›ç—°è—¥(æ­¢å’³å¹³å–˜)" },
      { "id": "D2473", "name": "è‰¾è‘‰", "category": "ç†è¡€è—¥(æ­¢è¡€)" },
      { "id": "D2494", "name": "é˜²é¢¨", "category": "è§£è¡¨è—¥(è¾›æº«è§£è¡¨)" },
      { "id": "D2491", "name": "èµ¤èŠ", "category": "æ¸…ç†±è—¥(æ¸…ç†±æ¶¼è¡€)" },
      { "id": "D2403", "name": "ç‰¡ä¸¹çš®", "category": "æ¸…ç†±è—¥(æ¸…ç†±æ¶¼è¡€)" },
      { "id": "D2492", "name": "è»Šå‰å­", "category": "ç¥›æ¿•è—¥(åˆ©æ°´æ»²æ¿•)" },
      { "id": "D2493", "name": "è¾›å¤·", "category": "è§£è¡¨è—¥(è¾›æº«è§£è¡¨)" },
      { "id": "D2482", "name": "æœä»²", "category": "è£œç›Šè—¥(è£œé™½)" },
      { "id": "D2478", "name": "å³èŒ±è¸", "category": "æº«è£¡è—¥" },
      { "id": "D2539", "name": "ä½•é¦–çƒ", "category": "è£œç›Šè—¥(è£œè¡€)" },
      { "id": "D2514", "name": "é˜¿è† ", "category": "è£œç›Šè—¥(è£œè¡€)" },
      { "id": "D2509", "name": "çŸ¥æ¯", "category": "æ¸…ç†±è—¥(æ¸…ç†±ç€‰ç«)" },
      { "id": "D2510", "name": "ç¾Œæ´»", "category": "è§£è¡¨è—¥(è¾›æº«è§£è¡¨)" },
      { "id": "D2502", "name": "æ‡æ·è‘‰", "category": "ç¥›ç—°è—¥(æ­¢å’³å¹³å–˜)" },
      { "id": "D2503", "name": "æ¿è—æ ¹", "category": "æ¸…ç†±è—¥(æ¸…ç†±è§£æ¯’)" },
      { "id": "D2541", "name": "æ³æ®¼", "category": "ç†æ°£è—¥" },
      { "id": "D2542", "name": "æ³å¯¦", "category": "ç†æ°£è—¥" },
      { "id": "D2547", "name": "æ¡‚æ", "category": "è§£è¡¨è—¥(è¾›æº«è§£è¡¨)" },
      { "id": "D2551", "name": "æ¡‘æ", "category": "ç¥›æ¿•è—¥(ç¥›é¢¨æ¿•)" },
      { "id": "D2553", "name": "æ¡‘è‘‰", "category": "è§£è¡¨è—¥(è¾›æ¶¼è§£è¡¨)" },
      { "id": "D2552", "name": "æ¡‘å¯„ç”Ÿ", "category": "ç¥›æ¿•è—¥(ç¥›é¢¨æ¿•)" },
      { "id": "D2550", "name": "æ¡‘ç™½çš®", "category": "ç¥›ç—°è—¥(æ­¢å’³å¹³å–˜)" },
      { "id": "D2578", "name": "èŒ¯ç¥", "category": "å®‰ç¥è—¥(é¤Šå¿ƒå®‰ç¥)" },
      { "id": "D2577", "name": "èŒ¯è‹“", "category": "ç¥›æ¿•è—¥(åˆ©æ°´æ»²æ¿•)" },
      { "id": "D2544", "name": "å¤æ¯è‰", "category": "æ¸…ç†±è—¥(æ¸…ç†±ç€‰ç«)" },
      { "id": "D2567", "name": "èŠèŠ¥", "category": "è§£è¡¨è—¥(è¾›æº«è§£è¡¨)" },
      { "id": "D2556", "name": "æ¡ƒä»", "category": "ç†è¡€è—¥(æ´»è¡€ç¥›ç˜€)" },
      { "id": "D2573", "name": "éª¨ç¢è£œ", "category": "è£œç›Šè—¥(è£œé™½)" },
      { "id": "D2591", "name": "ç´°è¾›", "category": "è§£è¡¨è—¥(è¾›æº«è§£è¡¨)" },
      { "id": "D2505", "name": "ç‚’éº¥èŠ½", "category": "æ¶ˆå°è—¥" },
      { "id": "D2595", "name": "é€£ç¿¹", "category": "æ¸…ç†±è—¥(æ¸…ç†±è§£æ¯’)" },
      { "id": "D2597", "name": "é™³çš®", "category": "ç†æ°£è—¥" },
      { "id": "D2523", "name": "æ·«ç¾Šè—¿", "category": "è£œç›Šè—¥(è£œé™½)" },
      { "id": "D2599", "name": "é­šè…¥è‰", "category": "æ¸…ç†±è—¥(æ¸…ç†±è§£æ¯’)" },
      { "id": "D2624", "name": "é»ƒç²¾", "category": "è£œç›Šè—¥(è£œé™°)" },
      { "id": "D2622", "name": "é»ƒæŸ", "category": "æ¸…ç†±è—¥(æ¸…ç†±ç‡¥æ¿•)" },
      { "id": "D2630", "name": "è‘›æ ¹", "category": "è§£è¡¨è—¥(è¾›æ¶¼è§£è¡¨)" },
      { "id": "D2415", "name": "å¤©éº»", "category": "å¹³è‚ç†„é¢¨è—¥" },
      { "id": "D2629", "name": "ç•¶æ­¸", "category": "è£œç›Šè—¥(è£œè¡€)" },
      { "id": "D2632", "name": "è£œéª¨è„‚", "category": "è£œç›Šè—¥(è£œé™½)" },
      { "id": "D2640", "name": "è’²å…¬è‹±", "category": "æ¸…ç†±è—¥(æ¸…ç†±è§£æ¯’)" },
      { "id": "D2643", "name": "è’¼è€³å­", "category": "è§£è¡¨è—¥(è¾›æº«è§£è¡¨)" },
      { "id": "D2642", "name": "è’¼æœ®", "category": "ç¥›æ¿•è—¥(èŠ³é¦™åŒ–æ¿•)" },
      { "id": "D2657", "name": "æ¾¤ç€‰", "category": "ç¥›æ¿•è—¥(åˆ©æ°´æ»²æ¿•)" },
      { "id": "D2660", "name": "é¾éª¨", "category": "å®‰ç¥è—¥(é¤Šå¿ƒå®‰ç¥)" },
      { "id": "D2667", "name": "è–è‹¡ä»", "category": "ç¥›æ¿•è—¥(åˆ©æ°´æ»²æ¿•)" },
      { "id": "D2676", "name": "é›è¡€è—¤", "category": "ç†è¡€è—¥(æ´»è¡€ç¥›ç˜€)" },
      { "id": "D2672", "name": "èŸ¬è›»", "category": "è§£è¡¨è—¥(è¾›æ¶¼è§£è¡¨)" },
      { "id": "D2685", "name": "é»¨åƒ", "category": "è£œç›Šè—¥(è£œæ°£)" },
      { "id": "D2689", "name": "é±‰ç”²", "category": "è£œç›Šè—¥(è£œé™°)" },
      { "id": "D2400", "name": "å·èŠ", "category": "ç†è¡€è—¥(æ´»è¡€ç¥›ç˜€)" },
      { "id": "D2411", "name": "å‡éº»", "category": "è§£è¡¨è—¥(è¾›æ¶¼è§£è¡¨)" },
      { "id": "D2636", "name": "æ§èŠ±", "category": "ç†è¡€è—¥(æ­¢è¡€)" },
      { "id": "D2512", "name": "é‡‘éŠ€èŠ±", "category": "æ¸…ç†±è—¥(æ¸…ç†±è§£æ¯’)" },
      { "id": "D2618", "name": "èŠèŠ±", "category": "è§£è¡¨è—¥(è¾›æ¶¼è§£è¡¨)" },
      { "id": "D2634", "name": "é‰¤è—¤", "category": "å¹³è‚ç†„é¢¨è—¥" },
      { "id": "D2648", "name": "ç†Ÿåœ°", "category": "è£œç›Šè—¥(è£œè¡€)" },
      { "id": "D2447", "name": "ç™½èŠ±è›‡èˆŒè‰", "category": "æ¸…ç†±è—¥(æ¸…ç†±è§£æ¯’)" },
      { "id": "D2406", "name": "äº”å‘³å­", "category": "æ”¶æ¾€è—¥" },
      { "id": "D2555", "name": "æŸ´èƒ¡", "category": "è§£è¡¨è—¥(è¾›æ¶¼è§£è¡¨)" },
      { "id": "D2646", "name": "é…¸æ£—ä»", "category": "å®‰ç¥è—¥(é¤Šå¿ƒå®‰ç¥)" },
      { "id": "D2385", "name": "ä¸‰ä¸ƒ", "category": "ç†è¡€è—¥(æ­¢è¡€)" },
      { "id": "D2409", "name": "å»¶èƒ¡ç´¢", "category": "ç†è¡€è—¥(æ´»è¡€ç¥›ç˜€)" },
      { "id": "D2481", "name": "æä»", "category": "ç¥›ç—°è—¥(æ­¢å’³å¹³å–˜)" },
      { "id": "D2441", "name": "ç”Ÿç”˜è‰", "category": "è£œç›Šè—¥(è£œæ°£)" },
      { "id": "D2395", "name": "å±±èŒ±è¸", "category": "è£œç›Šè—¥(è£œé™°)" },
      { "id": "D2531", "name": "ç´…èŠ±", "category": "ç†è¡€è—¥(æ´»è¡€ç¥›ç˜€)" },
      { "id": "D2687", "name": "çºŒæ–·", "category": "è£œç›Šè—¥(è£œé™½)" },
      { "id": "D2549", "name": "æ¡”æ¢—", "category": "ç¥›ç—°è—¥(æ¸…åŒ–ç†±ç—°)" },
      { "id": "D2433", "name": "åŒ—é»ƒè€†", "category": "è£œç›Šè—¥(è£œæ°£)" },
      { "id": "D2538", "name": "è‹¦åƒæ ¹", "category": "æ¸…ç†±è—¥(æ¸…ç†±ç‡¥æ¿•)" },
      { "id": "D2579", "name": "ä¹¾è–‘", "category": "æº«è£¡è—¥" },
      { "id": "D2449", "name": "ç™½èŠ·", "category": "è§£è¡¨è—¥(è¾›æº«è§£è¡¨)" },
      { "id": "D2461", "name": "çŸ³è†", "category": "æ¸…ç†±è—¥(æ¸…ç†±ç€‰ç«)" },
      { "id": "D2521", "name": "åšæœ´", "category": "ç†æ°£è—¥" },
      { "id": "D2585", "name": "æ¢”å­", "category": "æ¸…ç†±è—¥(æ¸…ç†±ç€‰ç«)" },
      { "id": "D2623", "name": "é»ƒé€£", "category": "æ¸…ç†±è—¥(æ¸…ç†±ç‡¥æ¿•)" },
      { "id": "D2627", "name": "çŸ³è–è’²", "category": "é–‹ç«…è—¥" },
      { "id": "D2416", "name": "å·´æˆŸå¤©", "category": "è£œç›Šè—¥(è£œé™½)" },
      { "id": "D2451", "name": "ç™½èŠ¨", "category": "ç†è¡€è—¥(æ­¢è¡€)" },
      { "id": "D2452", "name": "ç™½å‰", "category": "ç¥›ç—°è—¥(æº«åŒ–å¯’ç—°)" },
      { "id": "D2560", "name": "çƒæ¢…", "category": "æ”¶æ¾€è—¥" },
      { "id": "D2612", "name": "ç´«èŠ±åœ°ä¸", "category": "æ¸…ç†±è—¥(æ¸…ç†±è§£æ¯’)" },
      { "id": "D2655", "name": "æ©˜ç´…", "category": "ç†æ°£è—¥" },
      { "id": "D2668", "name": "è–¤ç™½", "category": "ç†æ°£è—¥" },
      { "id": "D2679", "name": "è—•ç¯€", "category": "ç†è¡€è—¥(æ­¢è¡€)" },
      { "id": "D2397", "name": "å±±æ¥‚", "category": "æ¶ˆå°è—¥" },
      { "id": "D2398", "name": "å·ç‰›è†", "category": "ç†è¡€è—¥(æ´»è¡€ç¥›ç˜€)" },
      { "id": "D2423", "name": "ç«éº»ä»", "category": "ç€‰ä¸‹è—¥(æ½¤ä¸‹)" },
      { "id": "D2431", "name": "åŒ—æ²™åƒ", "category": "è£œç›Šè—¥(è£œé™°)" },
      { "id": "D2432", "name": "ç‰›è‡³(åŒ—èŒµé™³)", "category": "è§£è¡¨è—¥(è¾›æ¶¼è§£è¡¨)" },
      { "id": "D2443", "name": "ç”Ÿåœ°é»ƒ", "category": "æ¸…ç†±è—¥(æ¸…ç†±æ¶¼è¡€)" },
      { "id": "D2504", "name": "ç‚’ç™½èŠ", "category": "è£œç›Šè—¥(è£œè¡€)" },
      { "id": "D2666", "name": "ç‚™æ®­è ¶", "category": "å¹³è‚ç†„é¢¨è—¥" },
      { "id": "D2485", "name": "æ±ºæ˜å­", "category": "æ¸…ç†±è—¥(æ¸…ç†±ç€‰ç«)" },
      { "id": "D2558", "name": "æµ™è²", "category": "ç¥›ç—°è—¥(æ¸…åŒ–ç†±ç—°)" },
      { "id": "D2527", "name": "æ¸æå­", "category": "è£œç›Šè—¥(è£œé™°)" },
      { "id": "D2515", "name": "ç‚®é™„å­", "category": "æº«è£¡è—¥" },
      { "id": "D2540", "name": "é¦™é™„", "category": "ç†æ°£è—¥" },
      { "id": "D2571", "name": "å€’åœ°èœˆèš£", "category": "æ¸…ç†±è—¥(æ¸…ç†±è§£æ¯’)" },
      { "id": "D2414", "name": "æ æ¨“æ ¹", "category": "æ¸…ç†±è—¥(æ¸…ç†±ç€‰ç«)" },
      { "id": "D2439", "name": "æ æ¨“å¯¦", "category": "ç¥›ç—°è—¥(ç‡¥æ¿•åŒ–ç—°)" },
      { "id": "D2583", "name": "æ•—é†¬è‰", "category": "æ¸…ç†±è—¥(æ¸…ç†±è§£æ¯’)" },
      { "id": "D2421", "name": "æ°´ç‚™éº»é»ƒ", "category": "è§£è¡¨è—¥(è¾›æº«è§£è¡¨)" },
      { "id": "D2614", "name": "ç´«è‰", "category": "æ¸…ç†±è—¥(æ¸…ç†±æ¶¼è¡€)" },
      { "id": "D2684", "name": "ç´«è˜‡è‘‰", "category": "è§£è¡¨è—¥(è¾›æº«è§£è¡¨)" },
      { "id": "D2645", "name": "ç‚™é å¿—", "category": "å®‰ç¥è—¥(é¤Šå¿ƒå®‰ç¥)" },
      { "id": "D2654", "name": "è±¬è‹“", "category": "ç¥›æ¿•è—¥(åˆ©æ°´æ»²æ¿•)" },
      { "id": "D2665", "name": "è–„è·è‘‰", "category": "è§£è¡¨è—¥(è¾›æ¶¼è§£è¡¨)" },
      { "id": "D2513", "name": "é‡‘éŒ¢è‰", "category": "ç¥›æ¿•è—¥(åˆ©æ°´æ»²æ¿•)" },
      { "id": "D2590", "name": "æ·®ç‰›è†", "category": "ç†è¡€è—¥(æ´»è¡€ç¥›ç˜€)" },
      { "id": "D2602", "name": "éº¥å†¬", "category": "è£œç›Šè—¥(è£œé™°)" },
      { "id": "D2605", "name": "ç¶¿èŒµé™³", "category": "ç¥›æ¿•è—¥(åˆ©æ°´æ»²æ¿•)" },
      { "id": "D2686", "name": "å»£è—¿é¦™", "category": "ç¥›æ¿•è—¥(èŠ³é¦™åŒ–æ¿•)" },
      { "id": "D2424", "name": "ç‰›è’¡å­", "category": "ç†æ°£è—¥" },
      { "id": "D2391", "name": "å¤§è…¹çš®", "category": "ç†æ°£è—¥" },
      { "id": "D2619", "name": "èŸçµ²å­", "category": "è£œç›Šè—¥(è£œé™½)" },
      { "id": "D2532", "name": "ç´…æ£—", "category": "è£œç›Šè—¥(è£œæ°£)" },
      { "id": "D2594", "name": "é€šè‰", "category": "ç¥›æ¿•è—¥(åˆ©æ°´æ»²æ¿•)" },
      { "id": "D2459", "name": "çŸ³æ±ºæ˜", "category": "å¹³è‚ç†„é¢¨è—¥" },
      { "id": "D2488", "name": "çš‚è§’åˆº", "category": "ç†è¡€è—¥(æ´»è¡€ç¥›ç˜€)" },
      { "id": "D2508", "name": "ç‹—è„Š", "category": "è£œç›Šè—¥(è£œé™½)" },
      { "id": "D2569", "name": "è‰è±†è”»", "category": "ç¥›æ¿•è—¥(èŠ³é¦™åŒ–æ¿•)" },
      { "id": "D2548", "name": "æ¡‚åœ“(é¾çœ¼è‚‰)", "category": "è£œç›Šè—¥(è£œè¡€)" },
      { "id": "D2529", "name": "çç æ¯", "category": "å¹³è‚ç†„é¢¨è—¥" },
      { "id": "D2732", "name": "æ™‰è€†", "category": "è£œç›Šè—¥(è£œæ°£)" },
      { "id": "D2621", "name": "é»ƒèŠ©", "category": "æ¸…ç†±è—¥(æ¸…ç†±ç‡¥æ¿•)" },
      { "id": "D2664", "name": "è†½å—æ˜Ÿ", "category": "ç¥›ç—°è—¥(ç‡¥æ¿•åŒ–ç—°)" },
      { "id": "D2506", "name": "ç‚™ç”˜è‰", "category": "è£œç›Šè—¥(è£œæ°£)" },
      { "id": "D2635", "name": "è‘¶è—¶å­", "category": "ç¥›ç—°è—¥(æ¸…åŒ–ç†±ç—°)" },
      { "id": "D2601", "name": "é¹¿èŒ¸", "category": "è£œç›Šè—¥(è£œé™½)" },
      { "id": "D2734", "name": "å†°ç‰‡", "category": "é–‹ç«…è—¥" },
      { "id": "D2455", "name": "é«˜éº—åƒ", "category": "è£œç›Šè—¥(è£œæ°£)" },
      { "id": "D2501", "name": "æ±æ´‹åƒ", "category": "è£œç›Šè—¥(è£œæ°£)" },
      { "id": "D2588", "name": "æ¸…è¯è‚‰æ¡‚", "category": "æº«è£¡è—¥" },
      { "id": "D2600", "name": "é¹¿è§’è† ", "category": "è£œç›Šè—¥(è£œé™½)" },
      { "id": "D2631", "name": "èœˆèš£", "category": "å¹³è‚ç†„é¢¨è—¥" },
      { "id": "D2565", "name": "ç²‰å…‰åƒ", "category": "è£œç›Šè—¥(è£œæ°£)" },
      { "id": "D2633", "name": "æ¡‚çš®", "category": "æº«è£¡è—¥" },
      { "id": "D2487", "name": "ç‰¡çŠ¡", "category": "å¹³è‚ç†„é¢¨è—¥(å¹³æŠ‘è‚é™½è—¥)" }
    ];

    let TOTAL_QUESTIONS = 20;
    let questionCounter = 0, score = 0, correctAnswer = null, currentQuizQuestions = [];

    const quizScreen = document.getElementById('quiz-screen');
    const resultsScreen = document.getElementById('results-screen');
    const progressEl = document.getElementById('progress');
    const herbImage = document.getElementById('herb-image');
    const optionsContainer = document.getElementById('options-container');
    const feedbackEl = document.getElementById('feedback');
    const scoreText = document.getElementById('score-text');
    const commentText = document.getElementById('comment-text');
    const restartBtn = document.getElementById('restart-btn');

    function askQuestionCount() {
      let input = prompt("è«‹è¼¸å…¥é€™æ¬¡æ¸¬é©—çš„é¡Œæ•¸ (1 ~ " + herbData.length + ")", "20");
      let num = parseInt(input);
      if (!isNaN(num) && num > 0 && num <= herbData.length) {
        TOTAL_QUESTIONS = num;
      } else {
        TOTAL_QUESTIONS = 20;
        alert("è¼¸å…¥ç„¡æ•ˆï¼Œé è¨­ä½¿ç”¨ 20 é¡Œã€‚");
      }
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function generateNewQuizSet() {
      currentQuizQuestions = [];
      const pool = [...herbData];
      shuffleArray(pool);
      currentQuizQuestions = pool.slice(0, TOTAL_QUESTIONS);
    }

    function loadHerbImage(id) {
      herbImage.src = `images/${id}.jpg`;
      herbImage.alt = `æ­£åœ¨è¼‰å…¥ ${id}`;
      herbImage.onerror = () => {
        herbImage.src = "";
        herbImage.alt = `âŒ æ‰¾ä¸åˆ°åœ–ç‰‡ ${id}.jpg`;
      };
    }

    function generateQuestion() {
      if (questionCounter >= TOTAL_QUESTIONS) { showResults(); return; }
      progressEl.textContent = `ç¬¬ ${questionCounter + 1} / ${TOTAL_QUESTIONS} é¡Œ`;
      feedbackEl.textContent = '';
      optionsContainer.innerHTML = '';
      correctAnswer = currentQuizQuestions[questionCounter];
      questionCounter++;
      let options = [correctAnswer];
      let wrongOptionsPool = herbData.filter(h => h.id !== correctAnswer.id);
      shuffleArray(wrongOptionsPool);
      options.push(...wrongOptionsPool.slice(0, 3));
      shuffleArray(options);
      loadHerbImage(correctAnswer.id);
      options.forEach(option => {
        const btn = document.createElement('button');
        btn.textContent = `${option.name} - ${option.category}`;
        btn.className = 'option-btn';
        btn.onclick = () => checkAnswer(option);
        optionsContainer.appendChild(btn);
      });
    }

    function checkAnswer(selected) {
      if (selected.id === correctAnswer.id) {
        feedbackEl.textContent = "âœ… æ­£ç¢ºï¼";
        feedbackEl.style.color = "green";
        score++;
      } else {
        feedbackEl.textContent = `âŒ éŒ¯èª¤ï¼Œæ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${correctAnswer.name}`;
        feedbackEl.style.color = "red";
      }
      setTimeout(generateQuestion, 1000);
    }

    function showResults() {
      quizScreen.classList.add('hidden');
      resultsScreen.classList.remove('hidden');
      scoreText.textContent = `ä½ çš„åˆ†æ•¸ï¼š${score} / ${TOTAL_QUESTIONS}`;
      if (score === TOTAL_QUESTIONS) commentText.textContent = "ğŸ‰ å¤ªå²å®³äº†ï¼å…¨å°ï¼";
      else if (score > TOTAL_QUESTIONS * 0.7) commentText.textContent = "ğŸ‘ è¡¨ç¾å¾ˆå¥½ï¼Œå†åŠ æ²¹ï¼";
      else commentText.textContent = "ğŸ’¡ å¤šç·´ç¿’å¹¾æ¬¡æœƒæ›´ç†Ÿæ‚‰ï¼";
    }

    function startQuiz() {
      askQuestionCount();
      questionCounter = 0;
      score = 0;
      resultsScreen.classList.add('hidden');
      quizScreen.classList.remove('hidden');
      generateNewQuizSet();
      generateQuestion();
    }

    restartBtn.onclick = startQuiz;
    window.onload = startQuiz;
  </script>
</body>
</html>
